/* ============== LAYOUT ============== */
.lib{
  min-height: calc(100dvh - var(--header-h, 100px));
  display:flex; align-items:center; justify-content:center;
  padding: 0 16px; text-align:center; width:100%;
}
/* controles centrais */
:root{
  --shelf-w: 400px;        /* largura do bloco (mantenha .libBox == .shelfEmpty) */
  --lib-offset-y: -5vh;    /* puxa o bloco um pouco pra cima */
  --side-shift: 50%;       /* afastamento das laterais (48–52%) */
  --side-scale: .82;       /* tamanho das laterais (.80–.88) */
  --side-depth: -90px;     /* “profundidade” das laterais (-60 a -110px) */
  --card-w: min(42vw, 172px);
}

.libBox{
  height: var(--lib-box-h, 60dvh);
  width: 200%;
  max-width: var(--shelf-w);
  display:flex; flex-direction:column;
  align-items:center; justify-content:center;
  gap: 8px;
  margin: 0 auto;                           /* centra sempre na horizontal */
  transform: translateY(var(--lib-offset-y));
}

/* ============== PRATELEIRA ============== */
.shelfEmpty{
  position:relative;
  width:min(var(--shelf-w), 92vw);
  height:clamp(260px, 44vh, 500px);
  margin-left:auto; margin-right:auto;      /* centra sempre */
  display:flex; align-items:center; justify-content:center;
  perspective:1000px;
}

/* ============== CENTRO (PLUS/CAPA) ============== */
.centerPlusCard,
.centerCard{
  position: relative; z-index: 5;           /* centro por cima das laterais */
  width: var(--card-w);
  aspect-ratio: 7/11;
  border-radius:15px;
  border:2px solid #3b82f6;
  background:#0f172a;
  display:grid; place-items:center;
  box-shadow: 0 18px 40px rgba(0,0,0,.45), inset 0 0 0 2px rgba(37,99,235,.15);
  cursor:pointer;
  transform-origin: center;
  transition: transform 320ms ease, opacity 320ms ease;
  will-change: transform, opacity;
}
/* “+” não some */
.centerPlusCard::before{
  content: "+"; position:absolute; inset:0; display:grid; place-items:center;
  font-size: 72px; font-weight: 900; line-height: 1;
  color:#4ac092; text-shadow: 0 0 18px rgba(34,197,94,.22);
}
.centerCover{
  width:100%; height:100%;
  object-fit:cover; border-radius: inherit;
  pointer-events:none; /* imagem não rouba clique */
}

/* ============== LATERAIS (com prévia de capa) ============== */
.sideCard{
  position:absolute; z-index:1;
  width: var(--card-w); 
  aspect-ratio: 3 / 4; 
  border-radius:15px;
  border:2px solid #a6a6a6;
  background:#0f172a;
  opacity:.85; filter:brightness(.85);
  box-shadow:0 12px 28px rgba(0,0,0,.30);
  cursor:pointer; overflow:hidden;
  transform-origin: center;
  transition: transform 320ms ease, opacity 320ms ease;
  will-change: transform, opacity;
}
.sideCard.left{
  transform:
    translateX(calc(-1 * var(--side-shift)))
    translateZ(var(--side-depth))
    scale(var(--side-scale));
}
.sideCard.right{
  transform:
    translateX(var(--side-shift))
    translateZ(var(--side-depth))
    scale(var(--side-scale));
}
.sideCard:disabled{ opacity:.45; pointer-events:none; }
.sideCover{
  width:100%; height:100%;
  object-fit:cover; border-radius:inherit; pointer-events:none;
}
.sideCoverPlaceholder{ font-size:28px; opacity:.8; }
.sidePlus{ font-size:32px; font-weight:900; color:#22c55e; pointer-events:none; }


/* ============== ANIMAÇÃO DE DESLIZAR ============== */
/* ===== durante a animação esconda o centro ===== */
.slidingNext .centerPlusCard,
.slidingNext .centerCard,
.slidingPrev .centerPlusCard,
.slidingPrev .centerCard{
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
}
/* NEXT: a lateral direita cresce até o centro */
.slidingNext .sideCard.right{
  transform: translateX(0) translateZ(0) scale(1);
  z-index: 6;
}
.slidingNext .sideCard.left{
  opacity: 0;
  transform:
    translateX(calc(-1.35 * var(--side-shift)))
    translateZ(var(--side-depth))
    scale(var(--side-scale));
}


/* PREV: a lateral esquerda cresce até o centro */
.slidingPrev .sideCard.left{
  transform: translateX(0) translateZ(0) scale(1);
  z-index: 6;
}
.slidingPrev .sideCard.right{
  opacity: 0;
  transform:
    translateX(calc(1.35 * var(--side-shift)))
    translateZ(var(--side-depth))
    scale(var(--side-scale));
}

/* ============== TÍTULO + CHIP ============== */
.libTitle{
  margin: 4px 0 4px;  /* bem perto do card */
  font-size: 30px; font-weight: 770; letter-spacing:.3px;
}
.libChip{
  display:inline-block; margin-top:0;
  background:#0b1222; color:#4ac092;
  border:2px solid #444850; border-radius:12px;
  padding:7px 16px; font-weight:700; font-size:15px;
  box-shadow: inset 0 0 0 2px rgba(0,0,0,.15);
}

/* ============== PLACEHOLDERS/LEGADO ============== */
.coverPlaceholder{ font-size:44px; opacity:.7; }
.addBtn{ display:none; }

/* ============== RESPONSIVO ============== */
@media (max-width: 380px){
  :root{
    --shelf-w: 360px;
    --side-shift: 44%;
    --side-scale: .80;
    --side-depth: -80px;
  }
}

