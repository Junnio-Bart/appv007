@import "./tokens.css";

*{box-sizing:border-box}
html,body,#root{height:100%}
body{
  margin:0; background:var(--bg); color:var(--text);
  font-family: system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Arial;
}
.app{ min-height:100%; display:flex; flex-direction:column; }
.app-main{ flex:1; padding:12px 16px calc(96px + env(safe-area-inset-bottom)); }

header.app-logo{
  text-align:center; padding:18px 0 6px; font-size:var(--fs-hero); font-weight:800;
  color:#8bd6b4;
}
header.app-logo .o1, header.app-logo .o2{ color:#3c83f6 }

.section{
  background:var(--panel); border:1px solid #1b2436; border-radius:16px;
  padding:16px; box-shadow: var(--shadow);
}
h1{ font-size: var(--fs-h1); margin:12px 0 8px }
p { font-size: var(--fs-body); color: var(--muted); margin:0 }

.bottom-nav{
  position:fixed; left:0; right:0; bottom:0;
  display:flex; gap:12px; padding:12px;
  background:rgba(7,12,22,.75); backdrop-filter:blur(8px);
  border-top:1px solid rgba(255,255,255,.06);
  padding-bottom: calc(12px + env(safe-area-inset-bottom));
  z-index: 400;
}
/* Botão com caixinha arredondada (como no seu desenho) */
.bottom-nav .nav-btn{
  flex:1; min-height:56px; border-radius:16px;
  border:1px solid #212a3c; background:#0c1324; color:#dbe2ee;
  display:grid; place-items:center;
  transition: outline-color .15s, background .15s;
}
.bottom-nav .nav-btn[aria-selected="true"]{
  outline:2px solid #2a62ff; outline-offset:0; background:#0f1b34;
}

/* Ícone como imagem: deixa inativo em cinza e ativo colorido */
.nav-icon{
  width:28px; height:28px; display:block;
  filter: grayscale(100%) opacity(.85);
  transition: filter .2s, transform .2s;
}
.bottom-nav .nav-btn[aria-selected="true"] .nav-icon{
  filter: none;
  transform: translateY(-1px);
}

/* Cabeçalho com logo central */
.app-header{
  display:flex; justify-content:center; align-items:flex-end;
  height: var(--header-h, 96px);
  padding-top: max(8px, env(safe-area-inset-top)); 
  padding-bottom: 6px;
  transition: height .18s ease, padding .18s ease, margin .18s ease, transform .18s ease, opacity .18s ease;
}

/* Botão do logo */
.logo-btn{
  appearance:none; -webkit-appearance:none;
  border:none; background:transparent; padding:0;
  line-height:0; cursor:pointer; border-radius:12px;
}
.logo-btn img{
  display:block;
  width: 140px;      /* ajuste o tamanho que quiser */
  height: clamp(28px, 7vw, 72px);
}
.logo-btn:focus-visible{
  outline:2px solid #2a62ff; outline-offset:4px;
}
/* Quando nenhuma aba está ativa (ex.: na Biblioteca), não mostrar contorno */
.bottom-nav .nav-btn[aria-selected="true"] { outline: 2px solid #2a62ff; }
.app-main:has(section[aria-label="Biblioteca"]) + .bottom-nav .nav-btn[aria-selected="true"] {
  outline: none;
}
.center-cta{
  display:grid; place-items:center;
  margin: 20px 0 6px;
}

.primary-btn{
  appearance:none; -webkit-appearance:none;
  border:1px solid #1f2a44;
  background:#0f1b34;
  color:#e5e7eb;
  padding:14px 18px;
  border-radius:14px;
  font-size: var(--fs-h2);
  display:inline-flex; align-items:center; gap:10px;
  min-height:52px;
  cursor:pointer;
  box-shadow: var(--shadow);
  transition: transform .15s ease, background .15s ease, border-color .15s ease;
}
.primary-btn:hover{ transform: translateY(-1px); }
.primary-btn:focus-visible{ outline:2px solid #2a62ff; outline-offset:2px; }

.primary-btn.with-icon img{
  width:22px; height:22px; display:block;
  filter: none;  /* mantém colorido */
}
/* Quando estiver na Biblioteca, reduz o padding inferior */
.app[data-tab="library"] .app-main{
  padding-bottom: 16px; /* em vez do calc(96px + safe-area) */
}
/* Quando estiver na Biblioteca, reduzir os preenchimentos
   (já que não há header nem bottom-nav) */
   .app[data-tab="library"] .app-main{
    padding-top: 16px;
    padding-bottom: 16px;
  }
  
  /* topo compacto */
.app-header{
  position: sticky;
  top: 0;
  z-index: 50;
  display: flex;
  justify-content: center;
  padding: calc(env(safe-area-inset-top, 0px) + 6px) 0 16px; /* notch + pouco espaço */
  background: var(--bg);
}

/* botão “limpo” */
.logo-btn{
  border: 0;
  background: transparent;
  padding: 0;
  line-height: 0;
}

/* TAMANHO DA LOGO (ajuste aqui) */
.logo-img{
  height: 85px !important;  /* troque p/ 64, 72… */
  width: auto !important;
  display: block;
  z-index: 0;
}

.logo-text{ font-weight:900; letter-spacing:1px; line-height:1;
  font-size: clamp(36px, 9vw, 72px); color:#e5e7eb; }
.logo-text .b1{ color:#4ac092 } .logo-text .b2{ color:#2563eb } .logo-text .b3{ color:#4ac092 }

/* ===== Botões simples ===== */
.btn-primary{
  background:#2bb673; color:#0a0f1d; border:0; padding:10px 14px;
  border-radius:12px; font-weight:600; box-shadow:0 4px 14px rgba(0,0,0,.25);
}
.btn-secondary{
  background:#101a2c; color:#cfe7da; border:1px solid #22314d;
  padding:10px 14px; border-radius:12px;
}
.btn-primary:active,.btn-secondary:active{ transform:translateY(1px); }

/* ===== Ações da biblioteca ===== */
.library-actions{
  display:flex; gap:10px; justify-content:center; margin:10px 0 6px;
}

/* ===== Carrossel ===== */
.carousel{ position:relative; padding:8px 40px; }
.carousel-list{
  display:flex; gap:14px; overflow-x:auto; scroll-snap-type:x mandatory; padding:6px 2px;
}
.carousel-list::-webkit-scrollbar{ display:none; }
.book-card{
  flex:0 0 68%; max-width:380px; aspect-ratio:3/4; scroll-snap-align:center;
  background:#0f172a; border-radius:18px; box-shadow:0 12px 28px rgba(0,0,0,.35);
  display:flex; flex-direction:column; overflow:hidden;
  transition:transform .2s ease, outline-color .2s ease;
  outline:2px solid transparent;
}
.book-card.is-active{ transform:scale(1.03); outline-color:#2bb673; }

.book-card-cover{ flex:1 1 auto; background:#16233d; display:grid; place-items:center; }
.book-card-cover img{ width:100%; height:100%; object-fit:cover; }
.book-card-placeholder{ color:#9bd5b7; font-weight:700; font-size:20px; }

.book-card-meta{ padding:10px 12px 12px; }
.book-title{ margin:0 0 4px; font-size:16px; }
.book-author{ margin:0 0 6px; color:#9fb3ce; font-size:13px; }
.book-progress{ margin:0; color:#8fd4b4; font-size:12px; }

/* setas */
.nav-arrow{
  position:absolute; top:50%; transform:translateY(-50%);
  width:36px; height:36px; border-radius:10px;
  border:1px solid #24324e; background:#0f172a; color:#cfe7da;
}
.nav-arrow.left{ left:6px; } .nav-arrow.right{ right:6px; }

/* ===== Vazio ===== */
.empty-lib{ text-align:center; padding:32px 12px 8px; color:#cfe7da; }

/* evita pull-to-refresh / overscroll geral */
html, body { height: 100%; overscroll-behavior: none; }

/* quando a aba ativa for a Biblioteca, não deixa a página rolar */
.app[data-tab="library"] {
  height: 100dvh;
  overflow: hidden;
}
.app[data-tab="library"] .app-main {
  height: calc(100dvh - var(--header-h, 96px));
  overflow: hidden;
  padding-bottom: env(safe-area-inset-bottom); /* iOS */
}

/* Centro absoluto do painel da Library (aba Biblioteca) */
.app[data-tab="library"] .app-main{
  min-height: calc(100dvh - var(--header-h)); /* ocupa o viewport abaixo do header */
  display: grid;
  place-items: center;                         /* centraliza horizontal + vertical */
  padding: 0 16px 16px;                        /* respiro nas bordas */
  overflow: hidden;                            /* evita scroll acidental */
}

/* Quando estiver na aba Progresso, o header (logo) NÃO é sticky */
.app[data-tab="progress"] 
.app-header{
  position: static;     /* era sticky */
}

/* Progresso: a logo rola junto, não é sticky */
.app[data-tab="progress"] .app-header{
  position: static !important;
  top: auto !important;
  box-shadow: none;
  background: var(--bg); 
}

.app[data-tab="progress"] .app-main{
  /* era: padding-bottom: calc(96px + env(safe-area-inset-bottom)); */
  padding-bottom: calc(76px + env(safe-area-inset-bottom));  /* ajuste 48–64px se quiser */
}

/* animação suave do header em qualquer aba */
.app-header{
  transition: height .18s ease, padding .18s ease, margin .18s ease,
              transform .18s ease, opacity .18s ease;
}

/* JOURNAL: quando a barra compacta ligar, “sobe” o header + zera o espaço */
body.journal-compact .app-header{
  height: 0;
  padding: 0;
  margin: 0;
  overflow: hidden;
  transform: translateY(-12px);
  opacity: 0;
  box-shadow: none;
}

/* (opcional) já temos: esconder só a imagem da logo.
   Mantém também, mas agora o header inteiro some. */
body.journal-compact #appLogo{
  opacity: 0;
  transform: translateY(-12px);
  height: 0;
  margin: 0;
  pointer-events: none;
}

/* No Journal, o header NÃO é fixo: rola junto com a página */
body[data-tab="journal"] .app-header{
  position: static !important;   /* em vez de fixed/sticky */
  top: auto !important;
  inset: auto !important;
  transform: none !important;
  opacity: 1 !important;
  height: auto !important;
  padding: var(--header-pad, 12px 0);  /* ajuste se quiser */
  box-shadow: none;
  z-index: auto;
}

/* Se você usa um “spacer” para compensar o header fixo, some com ele no Journal */
body[data-tab="journal"] .header-spacer{
  display: none !important;
}

/* Se o conteúdo tinha padding-top por causa do header fixo, remova só no Journal */
body[data-tab="journal"] .app-main,
body[data-tab="journal"] .app-content{
  padding-top: 0 !important;
}

/* JOURNAL: o topo NÃO é fixo — rola junto com a página */
.app[data-tab="journal"] .app-header,
.app[data-tab="journal"] header.app-header,
.app[data-tab="journal"] header,
.app[data-tab="journal"] .header,
.app[data-tab="journal"] .Header,
.app[data-tab="journal"] .topbar,
.app[data-tab="journal"] .Topbar,
.app[data-tab="journal"] #appLogo {
  position: static !important;
  top: auto !important;
  bottom: auto !important;
  inset: auto !important;
  transform: none !important;
  will-change: auto !important;
  z-index: auto !important;
  opacity: 1 !important;
  box-shadow: none !important;
}

/* Se existir um "spacer" que compensa header fixo, esconda no Journal */
.app[data-tab="journal"] .header-spacer,
.app[data-tab="journal"] .app-header-spacer{
  display: none !important;
}

/* Se o conteúdo tinha padding-top por causa do header fixo, zera aqui */
.app[data-tab="journal"] .app-main,
.app[data-tab="journal"] .app-content,
.app[data-tab="journal"] main{
  padding-top: 0 !important;
}

:root{
  --sb-track: #0b1326;     /* trilho */
  --sb-thumb: #2a3b5f;     /* polegar */
  --sb-thumb-hover: #3a5586;
  --sb-corner: #0b1326;
  --sb-width: 10px;        /* largura padrão */
}

/* WebKit (Chrome/Edge/Safari) */
*::-webkit-scrollbar{
  width: var(--sb-width);
  height: var(--sb-width);
}
*::-webkit-scrollbar-track{
  background: var(--sb-track);
  border-radius: 12px;
}
*::-webkit-scrollbar-thumb{
  background: var(--sb-thumb);
  border-radius: 12px;
  border: 2px solid var(--sb-track);  /* cria “miolo” clean */
}
*::-webkit-scrollbar-thumb:hover{
  background: var(--sb-thumb-hover);
}
*::-webkit-scrollbar-corner{
  background: var(--sb-corner);
}

/* Firefox */
*{
  scrollbar-width: thin;                         /* thin | auto | none */
  scrollbar-color: var(--sb-thumb) var(--sb-track);
}
